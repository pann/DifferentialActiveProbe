<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 750">
  <defs>
    <style>
      .title { font: bold 14px sans-serif; fill: #333; }
      .subtitle { font: 11px sans-serif; fill: #666; }
      .axis-label { font: 9px sans-serif; fill: #333; }
      .legend { font: 9px sans-serif; fill: #333; }
      .grid { stroke: #ddd; stroke-width: 0.5; }
      .axis { stroke: #333; stroke-width: 1; }
      .solution { font: 10px sans-serif; fill: #333; }
      .solution-title { font: bold 11px sans-serif; fill: #0066cc; }
      .warning { font: bold 11px sans-serif; fill: #cc0000; }
      .problem { font: bold 12px sans-serif; fill: #cc0000; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="950" height="750" fill="#fafafa"/>

  <!-- Main Title -->
  <text x="475" y="25" text-anchor="middle" class="title" style="font-size:18px">Scope Probe Loading Effects on Tuning</text>

  <!-- TOP LEFT: Scope Probe Loading Effect -->
  <g transform="translate(30,50)">
    <text x="190" y="0" text-anchor="middle" class="title">Scope Probe Loading Effect on Tuning</text>

    <!-- Graph area -->
    <rect x="50" y="25" width="320" height="180" fill="white" stroke="#ccc"/>

    <!-- ±0.5dB acceptable band -->
    <rect x="50" y="90" width="320" height="30" fill="#eeffee" opacity="0.3"/>

    <!-- Grid -->
    <g class="grid">
      <line x1="50" y1="60" x2="370" y2="60"/>
      <line x1="50" y1="90" x2="370" y2="90"/>
      <line x1="50" y1="120" x2="370" y2="120"/>
      <line x1="50" y1="150" x2="370" y2="150"/>
      <line x1="130" y1="25" x2="130" y2="205"/>
      <line x1="210" y1="25" x2="210" y2="205"/>
      <line x1="290" y1="25" x2="290" y2="205"/>
    </g>

    <!-- 0dB reference -->
    <line x1="50" y1="105" x2="370" y2="105" stroke="#999" stroke-width="1" stroke-dasharray="3,3"/>

    <!-- Axes -->
    <line x1="50" y1="205" x2="370" y2="205" class="axis"/>
    <line x1="50" y1="25" x2="50" y2="205" class="axis"/>

    <text x="210" y="230" text-anchor="middle" class="axis-label">Frequency (MHz)</text>
    <text x="20" y="115" text-anchor="middle" class="axis-label" transform="rotate(-90,20,115)">Relative Gain (dB)</text>

    <!-- Log scale labels -->
    <text x="50" y="220" text-anchor="middle" class="axis-label">0.1</text>
    <text x="130" y="220" text-anchor="middle" class="axis-label">1</text>
    <text x="210" y="220" text-anchor="middle" class="axis-label">10</text>
    <text x="290" y="220" text-anchor="middle" class="axis-label">100</text>
    <text x="370" y="220" text-anchor="middle" class="axis-label">1000</text>

    <text x="45" y="28" text-anchor="end" class="axis-label">+2</text>
    <text x="45" y="63" text-anchor="end" class="axis-label">+1</text>
    <text x="45" y="108" text-anchor="end" class="axis-label">0</text>
    <text x="45" y="153" text-anchor="end" class="axis-label">-1</text>
    <text x="45" y="198" text-anchor="end" class="axis-label">-2</text>

    <!-- Tuned correctly, final use (GOAL) - flat response -->
    <path d="M50,105 L290,105 Q320,108 350,115 Q365,120 370,130"
          fill="none" stroke="#00aa00" stroke-width="2"/>

    <!-- Tuned WITH scope, final use (WRONG!) - over-compensated -->
    <path d="M50,105 L130,103 Q170,95 210,80 Q250,65 280,60 Q320,70 350,100 Q365,120 370,145"
          fill="none" stroke="#cc0000" stroke-width="2"/>

    <!-- What you see during tuning (with scope) - looks flat but wrong C1 -->
    <path d="M50,105 L210,105 Q260,108 310,120 Q345,140 370,165"
          fill="none" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,3"/>

    <!-- 10 MHz marker -->
    <line x1="210" y1="25" x2="210" y2="205" stroke="#0066cc" stroke-width="1" stroke-dasharray="2,2"/>
    <text x="210" y="20" text-anchor="middle" class="axis-label" fill="#0066cc">10 MHz</text>

    <!-- 200 MHz marker -->
    <line x1="325" y1="25" x2="325" y2="205" stroke="#666" stroke-width="1" stroke-dasharray="2,2"/>
    <text x="325" y="20" text-anchor="middle" class="axis-label">200 MHz</text>

    <!-- Legend -->
    <rect x="55" y="150" width="200" height="50" fill="white" stroke="#ccc"/>
    <line x1="60" y1="163" x2="80" y2="163" stroke="#00aa00" stroke-width="2"/>
    <text x="85" y="166" class="legend">Tuned correctly, final use (GOAL)</text>
    <line x1="60" y1="178" x2="80" y2="178" stroke="#cc0000" stroke-width="2"/>
    <text x="85" y="181" class="legend">Tuned WITH scope, final use (WRONG!)</text>
    <line x1="60" y1="193" x2="80" y2="193" stroke="#ff9900" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="85" y="196" class="legend">What you see during tuning (with scope)</text>
  </g>

  <!-- TOP RIGHT: Error if Tuned WITH Scope Probe -->
  <g transform="translate(480,50)">
    <text x="200" y="0" text-anchor="middle" class="title">Error if Tuned WITH Scope Probe</text>
    <text x="200" y="15" text-anchor="middle" class="warning">(Over-compensation in final use)</text>

    <!-- Graph area -->
    <rect x="50" y="30" width="320" height="175" fill="white" stroke="#ccc"/>

    <!-- ±0.5dB spec band -->
    <rect x="50" y="85" width="320" height="30" fill="#eeffee" opacity="0.3"/>
    <text x="375" y="100" class="legend">±0.5 dB spec</text>

    <!-- Grid -->
    <g class="grid">
      <line x1="50" y1="60" x2="370" y2="60"/>
      <line x1="50" y1="100" x2="370" y2="100"/>
      <line x1="50" y1="140" x2="370" y2="140"/>
      <line x1="50" y1="180" x2="370" y2="180"/>
      <line x1="130" y1="30" x2="130" y2="205"/>
      <line x1="210" y1="30" x2="210" y2="205"/>
      <line x1="290" y1="30" x2="290" y2="205"/>
    </g>

    <!-- 0dB reference -->
    <line x1="50" y1="100" x2="370" y2="100" stroke="#999" stroke-width="1" stroke-dasharray="3,3"/>

    <!-- Axes -->
    <line x1="50" y1="205" x2="370" y2="205" class="axis"/>
    <line x1="50" y1="30" x2="50" y2="205" class="axis"/>

    <text x="210" y="230" text-anchor="middle" class="axis-label">Frequency (MHz)</text>
    <text x="20" y="115" text-anchor="middle" class="axis-label" transform="rotate(-90,20,115)">Gain Error (dB)</text>

    <!-- Log scale labels -->
    <text x="50" y="220" text-anchor="middle" class="axis-label">0.1</text>
    <text x="130" y="220" text-anchor="middle" class="axis-label">1</text>
    <text x="210" y="220" text-anchor="middle" class="axis-label">10</text>
    <text x="290" y="220" text-anchor="middle" class="axis-label">100</text>
    <text x="370" y="220" text-anchor="middle" class="axis-label">1000</text>

    <text x="45" y="33" text-anchor="end" class="axis-label">+2</text>
    <text x="45" y="63" text-anchor="end" class="axis-label">+1</text>
    <text x="45" y="103" text-anchor="end" class="axis-label">0</text>
    <text x="45" y="143" text-anchor="end" class="axis-label">-1</text>
    <text x="45" y="183" text-anchor="end" class="axis-label">-2</text>

    <!-- Error curve (shows overshoot then droop) -->
    <path d="M50,100 L130,98 Q170,90 210,75 Q250,60 280,55 Q310,60 340,85 Q360,110 370,140"
          fill="none" stroke="#cc0000" stroke-width="2"/>

    <!-- 200 MHz marker -->
    <line x1="325" y1="30" x2="325" y2="205" stroke="#666" stroke-width="1" stroke-dasharray="2,2"/>
    <text x="325" y="25" text-anchor="middle" class="axis-label">200 MHz</text>

    <!-- Error annotation -->
    <circle cx="325" cy="74" r="3" fill="#cc0000"/>
    <line x1="328" y1="74" x2="380" y2="50" stroke="#cc0000" stroke-width="1"/>
    <text x="385" y="45" class="legend" fill="#cc0000">Error at 200MHz:</text>
    <text x="385" y="57" class="legend" fill="#cc0000">~0.6 dB overshoot</text>

    <!-- Peak error annotation -->
    <circle cx="275" cy="56" r="3" fill="#cc0000"/>
    <line x1="275" y1="53" x2="275" y2="38" stroke="#cc0000" stroke-width="1"/>
    <text x="275" y="33" text-anchor="middle" class="legend" fill="#cc0000">Peak: +1.1 dB @ 80MHz</text>
  </g>

  <!-- BOTTOM LEFT: Step Response Comparison -->
  <g transform="translate(30,310)">
    <text x="190" y="0" text-anchor="middle" class="title">Step Response: Correct vs Wrong Tuning</text>

    <!-- Graph area -->
    <rect x="50" y="25" width="320" height="160" fill="white" stroke="#ccc"/>

    <!-- Grid -->
    <g class="grid">
      <line x1="50" y1="55" x2="370" y2="55"/>
      <line x1="50" y1="85" x2="370" y2="85"/>
      <line x1="50" y1="115" x2="370" y2="115"/>
      <line x1="50" y1="145" x2="370" y2="145"/>
    </g>

    <!-- 1.0 reference -->
    <line x1="50" y1="85" x2="370" y2="85" stroke="#999" stroke-width="1" stroke-dasharray="3,3"/>

    <!-- Axes -->
    <line x1="50" y1="185" x2="370" y2="185" class="axis"/>
    <line x1="50" y1="25" x2="50" y2="185" class="axis"/>

    <text x="210" y="205" text-anchor="middle" class="axis-label">Time (ns)</text>
    <text x="20" y="105" text-anchor="middle" class="axis-label" transform="rotate(-90,20,105)">Normalized Step Response</text>

    <!-- Time labels -->
    <text x="50" y="198" text-anchor="middle" class="axis-label">0</text>
    <text x="130" y="198" text-anchor="middle" class="axis-label">10</text>
    <text x="210" y="198" text-anchor="middle" class="axis-label">20</text>
    <text x="290" y="198" text-anchor="middle" class="axis-label">30</text>
    <text x="370" y="198" text-anchor="middle" class="axis-label">40</text>

    <text x="45" y="28" text-anchor="end" class="axis-label">1.15</text>
    <text x="45" y="58" text-anchor="end" class="axis-label">1.10</text>
    <text x="45" y="88" text-anchor="end" class="axis-label">1.00</text>
    <text x="45" y="118" text-anchor="end" class="axis-label">0.90</text>
    <text x="45" y="148" text-anchor="end" class="axis-label">0.80</text>
    <text x="45" y="178" text-anchor="end" class="axis-label">0.70</text>

    <!-- Correctly tuned (sharp rise, flat) -->
    <path d="M50,175 L70,175 L75,85 L370,85"
          fill="none" stroke="#00aa00" stroke-width="2"/>

    <!-- Tuned with scope probe (over-compensated - overshoot) -->
    <path d="M50,175 L70,175 L75,45 Q85,35 95,55 Q110,75 130,82 Q160,85 200,85 L370,85"
          fill="none" stroke="#cc0000" stroke-width="2"/>

    <!-- Legend -->
    <rect x="200" y="35" width="165" height="40" fill="white" stroke="#ccc"/>
    <line x1="205" y1="50" x2="225" y2="50" stroke="#00aa00" stroke-width="2"/>
    <text x="230" y="53" class="legend">Correctly tuned</text>
    <line x1="205" y1="65" x2="225" y2="65" stroke="#cc0000" stroke-width="2"/>
    <text x="230" y="68" class="legend">Tuned with scope probe (over-comp)</text>

    <!-- Annotations -->
    <text x="100" y="30" class="legend" fill="#cc0000">Over-compensated:</text>
    <text x="100" y="42" class="legend" fill="#cc0000">Overshoot visible</text>
  </g>

  <!-- RIGHT SIDE: Solutions -->
  <g transform="translate(480,295)">
    <rect x="0" y="0" width="440" height="435" fill="#f0f8ff" stroke="#0066cc" rx="5"/>
    <text x="220" y="22" text-anchor="middle" class="title" fill="#0066cc">SOLUTIONS FOR SCOPE PROBE LOADING</text>

    <!-- Problem Statement -->
    <rect x="10" y="35" width="420" height="50" fill="#ffeeee" stroke="#cc0000" rx="3"/>
    <text x="220" y="52" text-anchor="middle" class="problem">PROBLEM</text>
    <text x="220" y="68" text-anchor="middle" class="solution">Your 15 pF scope probe adds to C2_total, changing optimal C1</text>
    <text x="220" y="80" text-anchor="middle" class="solution">Without scope: C1 optimal = 1.24 pF  |  With scope: C1 optimal = 2.91 pF</text>

    <!-- Solution 1 -->
    <text x="15" y="105" class="solution-title">SOLUTION 1: Use 10× Scope Probe (RECOMMENDED)</text>
    <text x="25" y="122" class="solution">• 10× probes have ~10-15 MΩ || 10-15 pF input, but the 10× attenuation</text>
    <text x="25" y="137" class="solution">  means effective loading is only ~1.5 pF referred to tip</text>
    <text x="25" y="152" class="solution">• Much less impact on tuning accuracy</text>
    <text x="25" y="167" class="solution">• You lose 10× signal - may need higher input amplitude</text>

    <!-- Solution 2 -->
    <text x="15" y="192" class="solution-title">SOLUTION 2: Tune Blind, Verify with Calculation</text>
    <text x="25" y="209" class="solution">• Calculate optimal C1 from component values</text>
    <text x="25" y="224" class="solution">• Set C1 to calculated value (~1.3 pF)</text>
    <text x="25" y="239" class="solution">• Use square wave to verify "correct-looking" response</text>
    <text x="25" y="254" class="solution">• Accept that scope shows "slight droop" due to probe loading</text>

    <!-- Solution 3 -->
    <text x="15" y="279" class="solution-title">SOLUTION 3: Correction Factor Method</text>
    <text x="25" y="296" class="solution">• Tune with scope probe until response looks flat</text>
    <text x="25" y="311" class="solution">• Note the C1 setting</text>
    <text x="25" y="326" class="solution">• Apply correction factor:</text>
    <text x="35" y="341" class="solution">  C1_final = C1_tuned × (C2_total) / (C2_total + C_probe)</text>
    <text x="35" y="356" class="solution">  ≈ C1_tuned × 7 / (7 + 15) = C1_tuned × 0.32</text>
    <text x="25" y="371" class="solution">• This compensates for the extra probe capacitance</text>

    <!-- Solution 4 -->
    <text x="15" y="396" class="solution-title">SOLUTION 4: Series Resistor Isolation</text>
    <text x="25" y="413" class="solution">• Add 1kΩ resistor between test point and scope probe</text>
    <text x="25" y="428" class="solution">• Forms low-pass filter with probe capacitance: fc ≈ 10 MHz</text>
    <text x="25" y="443" class="solution">• Reduces probe loading but limits HF visibility</text>
    <text x="25" y="458" class="solution">• Good enough for 1 MHz square wave tuning</text>

    <!-- Solution 5 -->
    <text x="15" y="483" class="solution-title">SOLUTION 5: 50Ω Termination Method</text>
    <text x="25" y="500" class="solution">• Use the probe's BNC output into scope's 50Ω input</text>
    <text x="25" y="515" class="solution">• No additional probe capacitance</text>
    <text x="25" y="530" class="solution">• Requires scope with 50Ω input capability</text>
  </g>

  <!-- Summary Box -->
  <g transform="translate(30,530)">
    <rect x="0" y="0" width="420" height="100" fill="#ffffee" stroke="#cc9900" rx="5"/>
    <text x="210" y="20" text-anchor="middle" class="title" fill="#996600">KEY INSIGHT</text>
    <text x="15" y="42" class="solution">When tuning with a 15pF scope probe attached, the probe capacitance</text>
    <text x="15" y="57" class="solution">adds to the compensation network. You end up setting C1 higher than</text>
    <text x="15" y="72" class="solution">optimal to compensate for the probe. When the probe is removed,</text>
    <text x="15" y="87" class="solution">the probe becomes OVER-compensated, causing overshoot and peaking.</text>
  </g>

  <!-- Quick Reference Box -->
  <g transform="translate(30,645)">
    <rect x="0" y="0" width="420" height="85" fill="#eeffee" stroke="#00aa00" rx="5"/>
    <text x="210" y="18" text-anchor="middle" class="solution-title" fill="#00aa00">QUICK REFERENCE VALUES</text>
    <text x="20" y="40" class="solution">Without scope probe loading:</text>
    <text x="220" y="40" class="solution">C1 optimal ≈ 1.24 pF</text>
    <text x="20" y="57" class="solution">With 15pF scope probe:</text>
    <text x="220" y="57" class="solution">C1 optimal ≈ 2.91 pF (DON'T USE!)</text>
    <text x="20" y="74" class="solution">With 10× probe (~1.5pF effective):</text>
    <text x="220" y="74" class="solution">C1 optimal ≈ 1.35 pF (acceptable)</text>
  </g>
</svg>
